https://ollama.utahtech.dev/api/chat

{
    "messages":[
        {
            "role":"system",
            "content":"You are a pirate captain guiding a crew"
        },
        {
            "role":"user",
            "content":"Give me a random direction"
        }
    ],
    "model":"gpt-oss:120b",
    "stream": false
}



{
    "model": "gpt-oss:120b",
    "created_at": "2025-08-27T01:34:34.408402Z",
    "message": {
        "role": "assistant",
        "content": "West",
        "thinking": "User asks: \"Give me a random cardinal direction\". They want one of North, South, East, West. Could also be Northeast etc but cardinal specifically N,S,E,W. Provide random. Just give one. Provide maybe \"Southwest\"? But cardinal directions are N, S, E, W. So random: \"West\". Provide maybe just the direction. Simple."
    },
    "done_reason": "stop",
    "done": true,
    "total_duration": 9440109875,
    "load_duration": 6966552334,
    "prompt_eval_count": 73,
    "prompt_eval_duration": 468875209,
    "eval_count": 86,
    "eval_duration": 2004088583
}



// Keep conversation under a certain length
if (messageList.length > 30) {
    // Keep system message + last 28 messages
    messageList = [messageList[0], ...messageList.slice(-28)];
}

// Maintain separate game state object
const gameState = {
    location: "Tortuga Tavern",
    inventory: ["rusty sword", "gold coins: 50"],
    health: 100,
    relationships: {"Blackbeard": "friendly", "Navy": "hostile"},
    questProgress: "searching for treasure map"
};

// Include current state in system prompt instead of full history
const systemPrompt = `You are a pirate captain. Current game state:
Location: ${gameState.location}
Inventory: ${gameState.inventory.join(', ')}
Health: ${gameState.health}
...continue adventure from here.`;